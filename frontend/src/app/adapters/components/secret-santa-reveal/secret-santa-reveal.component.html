<div class="secret-santa-reveal" *ngIf="state !== 'hidden'">
  <!-- Loading State -->
  <div class="loading-state" *ngIf="state === 'loading'">
    <div class="spinner"></div>
    <span>Loading your Secret Santa assignment...</span>
  </div>

  <!-- Revealed State -->
  <div class="revealed-state" *ngIf="state === 'revealed' && assignment">
    <div class="reveal-header">
      <span class="gift-icon">ğŸ</span>
      <h3>Your Secret Santa Assignment</h3>
    </div>

    <div class="assignment-card">
      <p class="assignment-label">You are giving a gift to:</p>
      <p class="receiver-name" data-testid="receiver-name">
        {{ getMemberDisplay(assignment.receiverId) }}
      </p>
    </div>

    <div class="assignment-footer">
      <p class="reminder">
        Remember to keep it a secret! ğŸ¤«
      </p>
      <p class="budget-reminder" *ngIf="group?.budgetLimit">
        Budget: ${{ group?.budgetLimit }}
      </p>
    </div>
  </div>

  <!-- No Assignment State -->
  <div class="no-assignment-state" *ngIf="state === 'no-assignment'">
    <span class="info-icon">â„¹ï¸</span>
    <p>You don't have an assignment in this group.</p>
    <p class="sub-text">
      This may happen if you were not a member when the raffle was performed.
    </p>
  </div>

  <!-- Error State -->
  <div class="error-state" *ngIf="state === 'error'">
    <span class="error-icon">âŒ</span>
    <p>{{ errorMessage }}</p>
    <button
      class="btn btn-secondary"
      (click)="retry()"
      data-testid="retry-btn"
    >
      Try Again
    </button>
  </div>
</div>
